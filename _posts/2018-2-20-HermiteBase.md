---
layout: post
current: post
cover:  assets/images/20180110235443772.png
navigation: True
title: Hermite曲线基函数探究
date: 2018-2-20 00:00:04 +800
tags: [Graphics,Animation]
class: post-template
subclass: 'post tag-Graphics-and-Games'
author: yuyujunjun
---

hermite曲线的变化是受四个基函数控制的，相当于四个基函数的加权后累加。
我记得我曾经说过四个基函数会让我们的曲线有很好的性质：

> 从空间的角度思考：四个基函数均不平行，便构成一个四维空间，可以唯一确定四维空间的一条曲线。当我们提供了点的坐标和切向量，相当于改变了四维空间的基。或者说我们对原始基进行了缩放平移之类的操作，改变后的四维空间有很好的性质：
>
> + 当前三个值取0，最后一个坐标取1时，得到的点在三维空间的投影恰好等于我们的第一个点。
> + 当四个坐标都取1的时候，得到的点在三维空间的投影恰好等于我们给的第二个点。
> + 当前三个点按三次方，二次方，一次放赋值的时候，所得到的点在三维空间的点在我们给的两个点之间，且连成的曲线是平滑的。


##现在先来尝试解释一下为什么有这样的性质：
###前两个基函数：
$h1(u)=2u^3-3u^2+1$
$h2(u)=-2u^3+3u^2$
四维空间的这两个基的变化是由两个关键点决定的，与切向量没有关系(这是运算过程决定的)。我们先来看一下这两个函数式的特殊之处：
$h1(u)+h2(u)=1$
不管u如何变化，这个等式都成立。
所以这个等式只是两个关键点进行了加权平均，$h1(u)$代表第一个关键点对这条曲线的影响，$h2(u)$代表第二个关键点对这条曲线的影响，第一个关键点对这条曲线影响越大，那么曲线就和第一个关键点越接近。
于是我们不难得出（假装数学很好），关键点对曲线的影响，只是让曲线从这头到了那头，中间隔着长长的插值点，但它还是一条直线
所以现在的你也可以构造出一个基函数了嘛：
$h1(u)=u$
$h2(u)=1-u​$
是不是很容易？
这就是你对它的方案魔改之后的曲线
![这里写图片描述](http://img.blog.csdn.net/20180110235032883?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzQxMjIxOTQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
对于相同的切向量，原始基函数画出来的曲线长这样：
![这里写图片描述](http://img.blog.csdn.net/20180110235146725?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzQxMjIxOTQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
证明你构建的曲线还是很成功的，但是你构建出的曲线有一个问题：

为了让你更明确的意识到你的错误（哦不我的错误），我们将hermite曲线的后两个基函数直接抹去，如前面所述，这时候它就是直线了。
```
标准hermite基和你构建的伪hermite基的区别在于，你的u的变化是线性的，也就是说，随着u变化，你的插值点的距离是相同的（假设不考虑另外两个基函数的影响）
```
如下是一个标准hermite的曲线的插值变化:
![这里写图片描述](http://img.blog.csdn.net/20180110235314462?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzQxMjIxOTQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
###后两个基函数
我们说完了hermite的前两个基，我们现在来解释一下后两个基，说实话这时候就暴露出我的数学能力了，所以我并不打算从数学的方案严格计算，我们来点直观上的分析，先来两张基函数的图：
![这里写图片描述](http://img.blog.csdn.net/20180110235359107?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzQxMjIxOTQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
如上文所述，没有这两个基函数，我们只获得了hermite直线，这两个hermite基函数的意义便在于让直线产生偏移，通俗讲，将直线根据u的变化不同程度的掰弯。
####这两个函数有什么性质？
首先我们看第一个函数，它在靠近0的位置更大，而第二个函数在靠近1的位置更大。
我们已经知道u逼近0的时候曲线靠近第一个关键点，u逼近1的时候曲线靠近第二个关键点，也就是说
```最终的曲线在靠近第一个关键点的位置，会更接近第一个基函数加权的量，最终的曲线在靠近第二个关键点的位置，会更接近影响第二个基函数的值。```
我们来做个实验，我们让（-1000，-1000）来影响第一个基函数，让（+1000，+1000）来影响第二个基函数（为什么要用1000？做实验嘛，大气一点咯）另外注意qt的坐标轴位置，我们经过换算让左下角表示（0，0）
![这里写图片描述](http://img.blog.csdn.net/20180110235443772?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzQxMjIxOTQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
我们左下角为第一个点，右上角为第二个点，曲线果真如我们所料，在第一个关键的附近更接近（-1000，-1000），而在第二个关键点附近更接近（1000，1000）。
从实验图可以看出，这样的曲线，真的是，毫无意义啊。
所以我们不能生硬的给它一个值把它掰弯，我们应该让它合适一些，于是自然而然就想到了切向量，我们让曲线贴近我们想要的曲线的切向量，它不就变得合理了吗？
于是接下来的问题是，我们该如何估计切向量？
这是一个鸡生蛋的问题，有曲线我们才知道每个点的切向量，但现在就是要有切向量我们才知道曲线，没办法，只能估计了。
我们在心中大致想一个曲线的样子，从心中获取切向量然后做一个曲线，这样的曲线不久符合我们的心中预期了吗？
好的估计切向量的方法我们都会了，文章完。